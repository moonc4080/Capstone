---
- name: Create VyOS VM from Template
  hosts: localhost
  gather_facts: no
  collections:
    - community.vmware #remember to change

  # tasks file for system
- name: VyOS1
  vyos_system:
    host_name: "{{ inventory_hostname }}"

- name: Remove unneeded banners
  vyos_banner:
    banner: "{{ item }}"
    state: absent
  loop:
  - post-login

- name: Update login banner
  vyos_banner:
    banner: pre-login
    text: |
      ----------------------------------------
      |
      | This banner was generated by Ansible
      |
      ----------------------------------------
      |
      | You are logged into {{ inventory_hostname }}
      |
      ----------------------------------------
      |
    state: present

- name: Configure syslog
  vyos_config:
    lines:
      - "set system syslog host {{ log_host }} facility all level info"